<!-- Sloodle configuration form -->

<form method="post" action="module.php" id="form">
<div>
<!-- Session key and module name -->
<input type="hidden" name="sesskey" value="<?php echo $USER->sesskey ?>" />
<input type="hidden" name="module" value="sloodle" />

<table cellpadding="9" cellspacing="0" >

<!-- Notecard -->
<tr>
    <td colspan="3" align="left">
            <h3><?php print_string("setsetup:header", "sloodle"); ?></h3>
            <p><?php print_string("setsetup:body1", "sloodle"); ?></p>
            <p>
                <?php print_string("setsetup:body2", "sloodle"); ?>:
                <a href="sl_setup_notecard.php"><?php print_string("createnotecard", "sloodle"); ?></a>
            </p>
            <p><?php print_string("setsetup:body3", "sloodle"); ?></p>
    </td>
</tr>

<!-- Prim Password -->
<?php
    // Has a prim password already been set?
    if (!isset($CFG->sloodle_prim_password)) {
        // Not set - generate a random one
        $sloodleprimpwd = (string)mt_rand(100000000, 999999999);
        set_config("sloodle_prim_password", $sloodleprimpwd);
    } else {
        $sloodleprimpwd = $CFG->sloodle_prim_password;
    }
?>
<tr>
    <td colspan="3" align="left">
        <h3><?php print_string("primpass:set", "sloodle"); ?></h3>
        <p><?php print_string("primpass:setdesc", "sloodle"); ?></p>
        <input size="40" maxlength="40" type="text" name="prim_password" value="<?php echo $sloodleprimpwd; ?>"/>
    </td>
</tr>

<!-- User Authentication Method -->
<?php
    // Has an authentication method already been set?
    if (!isset($CFG->sloodle_auth_method)) {
        // Not set - default to web-based
        $sloodleauthmethod = "web";
        set_config("sloodle_auth_method", $sloodleauthmethod);
    } else {
        $sloodleauthmethod = $CFG->sloodle_auth_method;
    }
?>
<tr>
    <td colspan="3" align="left">
        <h3><?php print_string("userauth:header", "sloodle"); ?></h3>
        <p><?php print_string("userauth:desc", "sloodle"); ?></p>
        
        <table border="0">
            <tr>
                <td><input type="radio" name="auth_method" <?php if ($sloodleauthmethod == "web") echo "checked"; ?> value="web"/></td>
                <td><?php print_string("userauth:sendtopage", "sloodle"); ?></td>
            </tr>
            
            <tr>
                <td><input type="radio" name="auth_method" <?php if ($sloodleauthmethod == "autoregister") echo "checked"; ?> value="autoregister"/></td>
                <td><?php print_string("userauth:autoreg", "sloodle"); ?></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td><i><?php print_string("userauth:autoregnote", "sloodle"); ?></i><br /></td>
            </tr>
        </table>
    </td>
</tr>

<!-- Form Submission -->
<tr>
  <td colspan="3" align="center">
     <input type="submit" value="<?php print_string("savechanges") ?>" /></td>
</tr>
</table>
</div>
</form>

<!-- End Sloodle configuration form -->
