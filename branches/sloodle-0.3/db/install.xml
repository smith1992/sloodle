<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="mod/sloodle/db" VERSION="20080414" COMMENT="XMLDB file for Sloodle"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd">
  <TABLES>
    <TABLE NAME="sloodle" NEXT="sloodle_controller" COMMENT="Defines instances of Sloodle modules.">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="course"/>
            <FIELD NAME="course" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="type"/>
            <FIELD NAME="type" TYPE="char" LENGTH="50" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="course" NEXT="name" COMMENT="Shortname of the type of this Sloodle module."/>
            <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="type" NEXT="intro" COMMENT="The name of this Sloodle instance"/>
            <FIELD NAME="intro" TYPE="text" LENGTH="medium" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="name" NEXT="timecreated" COMMENT="Intro text for this Sloodle isntance"/>
            
            <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="intro" NEXT="timemodified"/>
            <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="timecreated"/>
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for sloodle"/>
        </KEYS>
        <INDEXES>
            <INDEX NAME="course" UNIQUE="false" FIELDS="course"/>
        </INDEXES>
    </TABLE>
    
    <TABLE NAME="sloodle_controller" PREVIOUS="sloodle" NEXT="sloodle_distributor" COMMENT="Defines instances of Sloodle controllers.">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="sloodleid"/>
            <FIELD NAME="sloodleid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" UNSIGNED="true" DEFAULT="0" ENUM="false" PREVIOUS="id" NEXT="enabled" COMMENT="Identifies which Sloodle instance this refers to."/>
            <FIELD NAME="enabled" TYPE="int" LENGTH="1" NOTNULL="true" SEQUENCE="false" UNSIGNED="true" DEFAULT="0" ENUM="false" PREVIOUS="sloodleid" NEXT="password" COMMENT="Shortname of the access level for this controller."/>
            <FIELD NAME="password" TYPE="char" LENGTH="9" NOTNULL="false" SEQUENCE="false" ENUM="false" PREVIOUS="enabled" COMENT="Prim Password for this instance. If left blank, it should use the site default."/>
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
        </KEYS>
        <INDEXES>
            <INDEX NAME="sloodleid" UNIQUE="true" FIELDS="sloodleid"/>
        </INDEXES>
    </TABLE>
    
    <TABLE NAME="sloodle_distributor" PREVIOUS="sloodle_controller" NEXT="sloodle_distributor_entry" COMMENT="Defines instances of Sloodle distributors.">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="sloodleid"/>
            <FIELD NAME="sloodleid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" UNSIGNED="true" DEFAULT="0" ENUM="false" PREVIOUS="id" NEXT="channel" COMMENT="Identifies which Sloodle instance this refers to."/>
            <FIELD NAME="channel" TYPE="char" LENGTH="36" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="sloodleid" NEXT="timeupdated" COMMENT="UUID of the XMLRPC channel opened by the Distributor object in-world"/>
            
            <FIELD NAME="timeupdated" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="channel"/>
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
        </KEYS>
        <INDEXES>
        </INDEXES>
    </TABLE>
    
    <TABLE NAME="sloodle_distributor_entry" PREVIOUS="sloodle_distributor" NEXT="sloodle_users" COMMENT="Defines entries in Sloodle Distributors.">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="distributorid"/>
            <FIELD NAME="distributorid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" UNSIGNED="true" DEFAULT="0" ENUM="false" PREVIOUS="id" NEXT="name" COMMENT="Identifies which Distributor instance this refers to."/>
            <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="distributorid" COMMENT="The name of this Sloodle distributor entry"/>
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
        </KEYS>
        <INDEXES>
        </INDEXES>
    </TABLE>
    
    <TABLE NAME="sloodle_users" COMMENT="Associates Moodle user IDs with Second Life avatar UUIDs and names" PREVIOUS="sloodle_distributor_entry" NEXT="sloodle_course">

      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="userid" COMMENT="Primary index field"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="uuid" COMMENT="Index of the associated Moodle user account."/>
        <FIELD NAME="uuid" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="userid" NEXT="avname" COMMENT="UUID of the user agent"/>
        <FIELD NAME="avname" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="uuid" NEXT="lastonline" COMMENT="Name of the avatar"/>
        <FIELD NAME="lastonline" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" DEFAULT="0" PREVIOUS="avname" COMMENT="Timestamp of the last time the avatar was seen anywhere in SL."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for sloodle_users"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="uuid" UNIQUE="false" FIELDS="uuid" NEXT="userid"/>
        <INDEX NAME="userid" UNIQUE="false" FIELDS="userid" PREVIOUS="uuid"/>
      </INDEXES>
    </TABLE>
    
    
    <TABLE NAME="sloodle_course" COMMENT="Stores Sloodle data about each course" PREVIOUS="sloodle_users" NEXT="sloodle_pending_avatars">

      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="course" COMMENT="Primary index field"/>
        <FIELD NAME="course" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" DEFAULT="0" PREVIOUS="id" NEXT="autoreg" COMMENT="Index of the Moodle course this record relates to"/>
        <FIELD NAME="autoreg" TYPE="int" LENGTH="1" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" DEFAULT="0" PREVIOUS="course" NEXT="autoenrol" COMMENT="Indicates whether or not auto-registration is enabled for this course"/>
        <FIELD NAME="autoenrol" TYPE="int" LENGTH="1" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" DEFAULT="0" PREVIOUS="autoreg" COMMENT="Indicates whether or not auto-enrolment is enabled for this course"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for sloodle_users"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="course" UNIQUE="false" FIELDS="course"/>
      </INDEXES>
    </TABLE>
    
    
    <TABLE NAME="sloodle_pending_avatars" COMMENT="Lists avatars which are awaiting a link to a Moodle account" PREVIOUS="sloodle_course" NEXT="sloodle_active_object">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="uuid" COMMENT="Primary index field"/>
        <FIELD NAME="uuid" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="avname" COMMENT="UUID of the user agent"/>
        <FIELD NAME="avname" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="uuid" NEXT="timeupdated" COMMENT="Name of the avatar"/>
        <FIELD NAME="timeupdated" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" DEFAULT="0" PREVIOUS="avname" COMMENT="Timestamp for when this entry was created or updated. Entries expire after a certain period."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="uuid" UNIQUE="false" FIELDS="uuid"/>
      </INDEXES>
    </TABLE>
    
    
    <TABLE NAME="sloodle_active_object" COMMENT="Lists objects which have been authorised to access specific controllers" PREVIOUS="sloodle_pending_avatars" NEXT="sloodle_pending_login_notifications">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="controllerid" COMMENT="Primary index field"/>
        <FIELD NAME="controllerid" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="userid" COMMENT="The controller which this object is authorised for."/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="controllerid" NEXT="uuid" COMMENT="ID of the user who authorised this object."/>
        <FIELD NAME="uuid" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="userid" NEXT="password" COMMENT="UUID of the object"/>
        <FIELD NAME="password" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="uuid" NEXT="timeupdated" COMMENT="Object-specific password"/>
        <FIELD NAME="timeupdated" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" DEFAULT="0" PREVIOUS="password" COMMENT="Timestamp for when this entry was created or updated. Entries expire after a certain period."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="controllerid-uuid" UNIQUE="true" FIELDS="controllerid,uuid" COMMENT="Objects cannot be authorised more than once to the same controller"/>
      </INDEXES>
    </TABLE>
    
    
    <TABLE NAME="sloodle_pending_login_notifications" COMMENT="Contains the details of auto-registration login details which are to be sent" PREVIOUS="sloodle_active_object">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="destination" COMMENT="Primary index field"/>
        <FIELD NAME="destination" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="avatar" COMMENT="UUID of the object which will relay the notification"/>
        <FIELD NAME="avatar" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="destination" NEXT="username" COMMENT="UUID of the user agent to whom the notification is being sent"/>
        <FIELD NAME="username" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="avatar" NEXT="password" COMMENT="Username of the new account"/>
        <FIELD NAME="password" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="username" COMMENT="Plaintext password of the new account"/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
      </KEYS>
      <INDEXES>
      </INDEXES>
    </TABLE>
    
    
    <TABLE NAME="sloodle_layout" PREVIOUS="sloodle_pending_login_notifications" NEXT="sloodle_layout_entry" COMMENT="Defines classroom layout profiles">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="course"/>
            <FIELD NAME="course" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" UNSIGNED="true" DEFAULT="0" ENUM="false" PREVIOUS="id" NEXT="name" COMMENT="Identifies which course this profile belongs to. Relates to the Moodle course table"/>
            <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="course" NEXT="timeupdated" COMMENT="The name of this layout profile"/>
            <FIELD NAME="timeupdated" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="name" COMMENT="Timestamps for when this profile was last updated"/>
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
        </KEYS>
        <INDEXES>
            <INDEX NAME="course-name" UNIQUE="true" FIELDS="course,name" COMMENT="Profile names must be unique within each course"/>
        </INDEXES>
    </TABLE>
    
    <TABLE NAME="sloodle_layout_entry" PREVIOUS="sloodle_layout" COMMENT="Defines an object entry in a classroom layout">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="course"/>
            <FIELD NAME="layout" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" UNSIGNED="true" DEFAULT="0" ENUM="false" PREVIOUS="id" NEXT="name" COMMENT="Identifies which layout profile this entry belongs to"/>
            <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="layout" NEXT="position" COMMENT="The name of the object"/>
            <FIELD NAME="position" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="name" NEXT="rotation" COMMENT="The position of the object, as a 3d SL-style vector"/>
            <FIELD NAME="rotation" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="position" COMMENT="The rotation of the object, stored as a 3d SL-style vector of Euler angles"/>
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
        </KEYS>
        <INDEXES>
            <INDEX NAME="layout" UNIQUE="false" FIELDS="layout"/>
        </INDEXES>
    </TABLE>
    

  </TABLES>
</XMLDB>
