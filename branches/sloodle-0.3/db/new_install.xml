<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="mod/sloodle/db" VERSION="20071113" COMMENT="XMLDB file for Sloodle"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd">
  <TABLES>
    <TABLE NAME="sloodle" COMMENT="For future use. Defines instances of the Sloodle module." NEXT="sloodle_active_object">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="course"/>
            <FIELD NAME="course" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" DEFAULT="0" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="name"/>
            <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="course"/>
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for sloodle"/>
        </KEYS>
            <INDEXES>
            <INDEX NAME="course" UNIQUE="false" FIELDS="course"/>
        </INDEXES>
    </TABLE>
    
    <TABLE NAME="sloodle_active_object" COMMENT="Each entry is a known active Sloodle object in Second Life." PREVIOUS="sloodle" NEXT="sloodle_classroom_layout_entry">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="sloodle_classroom_setup_profile_id" COMMENT="Primary record field"/>
            <FIELD NAME="sloodleid" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="uuid" COMMENT="ID of the Sloodle instance which this object belongs to (or 0 if it is a generic system object)."/>
            <FIELD NAME="uuid" TYPE="char" LENGTH="36" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="sloodleid" NEXT="name" COMMENT="UUID of the object in-world"/>
            <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="false" SEQUENCE="false" ENUM="false" PREVIOUS="uuid" NEXT="pwd" COMMENT="Name of the object in-world (optional)"/>
            <FIELD NAME="pwd" TYPE="char" LENGTH="255" NOTNULL="false" SEQUENCE="false" ENUM="false" PREVIOUS="name" NEXT="userid" COMMENT="Object-specific session password (if applicable)"/>
            <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="false" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="pwd" NEXT="created" COMMENT="ID of the Moodle user who authorised this object (if applicable)."/>
            <FIELD NAME="created" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="userid" NEXT="updated" COMMENT="Timestamp when this entry was created."/>
            <FIELD NAME="updated" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="created" COMMENT="Timestamp of the last time this object was updated, e.g. by regular 'ping' from in-world."/>  
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for sloodle_active_object"/>
        </KEYS>
        <INDEXES>
            <INDEX NAME="sloodleid" UNIQUE="false" FIELDS="sloodleid" NEXT="uuid"/>
            <INDEX NAME="uuid" UNIQUE="true" FIELDS="uuid" PREVIOUS="sloodleid" NEXT="userid"/>
            <INDEX NAME="userid" UNIQUE="false" FIELDS="userid" PREVIOUS="uuid"/>
        </INDEXES>
    </TABLE>
    
    <TABLE NAME="sloodle_classroom_layout_entry" COMMENT="Each entry is a single object in a classroom layout" PREVIOUS="sloodle_active_object" NEXT="sloodle_users">
        <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="sloodleid" COMMENT="Primary table ID"/>
        <FIELD NAME="sloodleid" TYPE="int" LENGTH="10" NOTNULL="false" UNSIGNED="false" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="name" COMMENT="ID of the Sloodle instance this layout item belongs to"/>
        <FIELD NAME="name" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="sloodleid" NEXT="relative_position" COMMENT="Name of the item rezzed"/>
        <FIELD NAME="relative_position" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="name" COMMENT="Position to rez the item, relative to the classroom"/>
        </FIELDS>

        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for sloodle_classroom_setup_profile_entry"/>
        </KEYS>
        <INDEXES>
            <INDEX NAME="sloodleid" UNIQUE="false" FIELDS="sloodleid"/>
        </INDEXES>
    </TABLE>
 
 
    <TABLE NAME="sloodle_users" COMMENT="Associates Moodle user IDs with Second Life avatar UUIDs and names" PREVIOUS="sloodle_classroom_layout_entry" NEXT="sloodle_users_pending">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="userid" COMMENT="Primary table ID"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="uuid" COMMENT="ID of the Moodle user this entry is associated with"/>
        <FIELD NAME="uuid" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="userid" NEXT="avname" COMMENT="UUID of the avatar"/>
        <FIELD NAME="avname" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="uuid" NEXT="lastonline" COMMENT="Name of the avatar"/>
        <FIELD NAME="lastonline" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" DEFAULT="0" PREVIOUS="avname" NEXT="created" COMMENT="Timestamp of when this user was last seen online in SL"/>
        <FIELD NAME="created" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="lastonline" COMMENT="Timestamp when this entry was created."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="userid" UNIQUE="false" FIELDS="userid" NEXT="uuid"/>
        <INDEX NAME="uuid" UNIQUE="true" FIELDS="uuid" PREVIOUS="userid"/>
      </INDEXES>
    </TABLE>
    
    <TABLE NAME="sloodle_users_pending" COMMENT="Associates Moodle user IDs with Second Life avatar UUIDs and names" PREVIOUS="sloodle_users" NEXT="sloodle_loginzone_allocations">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="uuid" COMMENT="Primary table ID"/>
        <FIELD NAME="uuid" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="avname" COMMENT="UUID of the avatar"/>
        <FIELD NAME="avname" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="uuid" NEXT="loginsecuritytoken" COMMENT="Name of the avatar"/>
        <FIELD NAME="loginsecuritytoken" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="avname" NEXT="created" COMMENT="A security token which authenticates this registration"/>
        <FIELD NAME="created" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="loginsecuritytoken" COMMENT="Timestamp when this entry was created."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="uuid" UNIQUE="true" FIELDS="uuid"/>
      </INDEXES>
    </TABLE>
    
    <TABLE NAME="sloodle_loginzone_allocations" COMMENT="Contains the LoginZone positions which have been allocated to Moodle users" PREVIOUS="sloodle_users_pending" NEXT="">
      <FIELDS>
        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="userid" COMMENT="Primary table ID"/>
        <FIELD NAME="userid" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="loginzoneid" COMMENT="ID of the Moodle user this entry is associated with"/>
        <FIELD NAME="loginzoneid" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="userid" NEXT="relative_position" COMMENT="ID of the LoginZone which this allocation will use"/>
        <FIELD NAME="relative_position" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="loginzoneid" NEXT="created" COMMENT="Relative position of this allocation to the LoginZone object (string vector, &lt;x,y,z&gt;)"/>
        <FIELD NAME="created" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="relative_position" NEXT="expires" COMMENT="Timestamp when this entry was created."/>
        <FIELD NAME="expires" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="false" ENUM="false" PREVIOUS="created" COMMENT="Timestamp when this allocation expires."/>
      </FIELDS>
      <KEYS>
        <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
      </KEYS>
      <INDEXES>
        <INDEX NAME="userid" UNIQUE="true" FIELDS="userid" NEXT="loginzoneid" COMMENT="Cannot have more than one allocation per user"/>
        <INDEX NAME="loginzoneid" UNIQUE="false" FIELDS="loginzoneid" PREVIOUS="userid"/>
      </INDEXES>
    </TABLE>
    
    
    <TABLE NAME="sloodle_loginzones" COMMENT="Each entry is a known active LoginZone object in Second Life." PREVIOUS="sloodle_loginzone_allocations">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="true" SEQUENCE="true" ENUM="false" NEXT="sloodleid" COMMENT="Primary record field"/>
            <FIELD NAME="sloodleid" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="false" SEQUENCE="false" ENUM="false" PREVIOUS="id" NEXT="uuid" COMMENT="ID of the Sloodle instance which this object belongs to (or 0 if it is a generic system object)."/>
            <FIELD NAME="region" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="sloodleid" NEXT="position" COMMENT="Name of the region where this LoginZone is located"/>
            <FIELD NAME="position" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="region" NEXT="size" COMMENT="Position of the LoginZone object (string vector, <x,y,z>)"/>
            <FIELD NAME="size" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false" ENUM="false" PREVIOUS="position" NEXT="updated" COMMENT="Size of the LoginZone object (string vector, <x,y,z>)"/>
            <FIELD NAME="updated" TYPE="int" LENGTH="10" NOTNULL="true" UNSIGNED="false" SEQUENCE="false" ENUM="false" PREVIOUS="size" COMMENT="Timestamp of the last time this object was updated, e.g. by regular 'ping' from in-world."/>  
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id" COMMENT="Primary key for table"/>
        </KEYS>
        <INDEXES>
            <INDEX NAME="sloodleid" UNIQUE="true" FIELDS="sloodleid" COMMENT="Cannot have more than one LoginZone per Sloodle instance"/>
        </INDEXES>
    </TABLE>

  </TABLES>
</XMLDB>